## 平时的打字查询候选项思路

### 单字

默认的情况下，我们应该检索出来哪些字呢？我们不应该一下子把所有的汉字都检索出来，不应该把 8 万个汉字当成一个整体去检索，如果这样，那么，即使我们在使用数据库把数据检索出来所耗费的时间并不很多，但是之后的处理装载这些候选项的容器的时间会比较多，而且，很有可能，这些容器需要重复搬运，如果遇到类似于 yi 以及以 yi 开头的词组，那么，耗费的时间是相当庞大的，yi 对应的单字大概就超过了 400 个，所以，设计的时候需要考量一下。这个可以在结尾加一个`大写字母`作为标识，可以加一个 `Q`，表示`全部`查出来的意思。对，针对某些数量巨大的候选项，需要这么优化一下，不过，这里实际上是全部优化了，我们可以再次把候选项的范围给缩小，对于单字，我们可以把类似 yi 这样的拼音给单独拿出来处理，对于数量不多的，SQL 就不必加 limit 限制了。在尾部缀上大写字母的情况下，可以继续使用单码或全码辅助码，当然，也可以先使用单码或双码辅助码，然后再缀上 `Q`。以上所讨论的是单字的情况。

### 双字

### 多字

多字查询的 SQL 语句不要加 limit 的限制，因为数量实在太少。

多字一般没有什么全不全的问题，一般来说，单码甚至就够了，因为实际能取出来的候选项会比较少，很少。全码（每个字的单码拼接而成）要确保也可以用，由此，我们还需要保证另外一件事情，即，要`尽量保证词库中的所有的词组涉及到的单字都要有辅助码`。

## 辅助码的设计思路

不管是单字还是双字，默认的情况下，在双拼码为奇数的情况下，是会启用辅助码过滤的。

我们在单码辅助的时候，如果想进入全码辅助，不需要删掉原来的那个用来辅助的单码再按下 Tab 进行翻页进入全码辅助状态，而是可以直接按下 Tab，就可以翻页（如果可以翻页的话），并且进入全码辅助的状态。

## 缓存的设计思路

利用一个定长的循环队列来缓存之前查询过的条目，便于构造更加完善的输入法候选列表，即，

## 输入法的候选列表都有哪些

1. 1 个字符

比如，n，那么，generate 单字即可，这里选择 32 个汉字作为默认的情况的硬编码，因为这个在大部分情况下是用不到的，双拼的用户更多的是想利用完整的编码来进行上屏，

## 辅助码的重新设计

比如，孬这种一眼就可以看出是两个字合成的，那么，我们就直接按照拆字的规则来给它设计辅助码，所以，孬的辅助码可以设计成 bh，也就是 不 的 b 和 好的 h。

